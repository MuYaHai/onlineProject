<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Twinkling Days</title>
    <link rel="stylesheet" href="elementui/index.css">
    <!-- 引入组件库 -->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script src="js/vue.js"></script>
    <script src="elementui/index.js"></script>
    <!--    <script src="/js/axios-0.18.0.js"></script>-->
    <!--H-ui前端框架-->
    <link href="H-ui-1.0.9/iconfont.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="css/reset.css"> <!-- CSS reset -->
    <link rel="stylesheet" href="css/style.css"> <!-- Resource style -->
    <script src="js/modernizr.js"></script> <!-- Modernizr -->
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/jquery-1.11.0.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/include.js"></script>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link href="css/floating-labels.css" rel="stylesheet">
    <script src="js/axios-0.18.0.js"></script>
    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>
</head>
<body>
<div id="header"></div>
<form class="form-signin"id="form">
    <div id="errorMsg" class="alert alert-danger" ></div>
    <span style="color: red"><h2 id="msg"></h2></span>
    <div class="text-center mb-4">
        <h1 class="h3 mb-3 font-weight-normal">Twinkling Days</h1>
    </div>

    <div class="form-label-group">
        <input type="text" id="username" name="username" class="form-control" style="height: 50px" placeholder="请输入用户名" required="" autofocus="">
        <label for="username">用户名</label>
    </div>

    <div class="form-label-group">
        <input type="password" id="inputPassword" name="password" class="form-control" style="height: 50px" placeholder="请输入密码" required="">
        <label for="inputPassword">Password</label>
    </div>

    <div class="checkbox mb-3">
        <label>
            <input type="checkbox" value="remember-me" name="remember"> 记住密码
        </label>
    </div>
    <button class="btn btn-lg btn-primary btn-block" type="button" id="btn">登录</button>
    <p class="mt-5 mb-3 text-muted text-center">© 2019-12-1</p>
</form>
<script>
    $(function () {
        $("#btn").click(function () {
            if (judgeName() && judgepwd()) {
                $.get("/user/login", $("#form").serialize(), function (data) {
                    if (data.flag) {
                        location.href = "index.html?id="+data.data.id;
                    } else {
                        $("#errorMsg").html(data.message);
                    }
                });
            } else {
                $("#errorMsg").html("错误：请输入用户名或密码");
            }
        });

        $.get("/user/getUserInfo",function (data) {
            if (data.flag) {
                $("#inputPassword").val(data.data.password);
                $("#username").val(data.data.username);
            }
        })

    });
    function judgeName() {
        let innerText = $("#username").val();
        if (innerText != undefined && innerText!=null && innerText!='') {
            return true;
        } else {
            return false;
        }
    }

    function judgepwd() {
        let innerText = $("#inputPassword").val();
        if (innerText != undefined && innerText!=null && innerText!='') {
            return true;
        } else {
            return false;
        }
    }
</script>
</body>
</html>